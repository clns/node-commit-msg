# How to contribute

There are 2 ways you can contribute to this project:

1. [Create issues](#create-an-issue)
2. [Submit pull requests](#getting-started)

>In both cases **make sure you're familiar with GitHub's [Contributing to a Project](https://guides.github.com/activities/contributing-to-open-source/#contributing)
guide.**

## Create an Issue

It's possible you'll encounter verb tenses that don't validate correctly.
For example a past tense sentence might pass validation, or a correct
imperative message might not validate in some cases.

The good news is these can be corrected by training the parser. The only thing
you need to do is [create an issue](https://github.com/clns/node-commit-msg/issues?utf8=âœ“&q=is%3Aissue)
with the message, but **only if there isn't
already an issue that refer to improper tense validation** (re-open the issue
if it's closed).

## Getting Started

##### 1. Clone the repository to your preferred location

```sh
git clone https://github.com/clns/node-commit-msg
cd node-commit-msg
```

> Or maybe you want to fork it first and clone it from your location so you
can send in pull requests.

##### 2. Install the optional prerequisites

Try to have the optional prerequisites installed. These are needed by
[node-java](https://github.com/joeferner/node-java) and it greatly improves
the parser speed (especially when running tests or using the
[validate](bin/validate) script) because it accesses the parser's API
directly instead of calling shell commands and having the
parser load the model each time.

- [Python 2.7](https://www.python.org/downloads/) (Python 3.x is *not* supported)
- [Java JDK 8](http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html)
(make sure you have the JDK installed not just JRE)

##### 3. Install dependencies

```sh
npm install
```

##### 4. Start coding

- Please add/update the tests for every change you make
- When committing, make sure you're following [the rules](#commit-message)

### Tests

```sh
npm test
```

If you run out of
[GitHub anonymous requests](https://developer.github.com/v3/#rate-limiting)
when running the tests (you see messages like "*warning: GitHub
reference check failed with status code 403 ...*") you can provide a
[personal access token](https://github.com/settings/tokens) like this:

```sh
GITHUB_TOKEN=<token> npm test
```

or in PowerShell:

```PowerShell
$env:GITHUB_TOKEN='<token>'; npm test
```

### Troubleshooting

##### This application requires the legacy Java SE 6 runtime which is unavailable for this version of OS X.

If you encounter this runtime issue when calling java from node.js,
especially if you're on OS X 10.11 El Capitan, see
[this issue](https://github.com/joeferner/node-java/issues/223#issuecomment-110408072)
for a fix.

## Commit Message

A good commit message should answer three questions:

1. **Why is it necessary?** It may fix a bug, add a feature, improve
performance, reliability, stability, or just be a change for the sake
of correctness.
2. **How does it address the issue?** For short obvious patches this part
can be omitted, but it should be a high level description of what the
approach was.
3. **What effects does the patch have?** (In addition to the obvious ones,
this may include benchmarks, side effects, etc.)

Structure your commit message like this:

```
Capitalized, short (50 chars or less) summary

More detailed explanatory text, if necessary.  Wrap it to about 72
characters or so.  In some contexts, the first line is treated as the
subject of an email and the rest of the text as the body.  The blank
line separating the summary from the body is critical (unless you omit
the body entirely); tools like rebase can get confused if you run the
two together.

Write your commit message in the imperative: "Fix bug" and not
"Fixed bug" or "Fixes bug". This convention matches up with commit
messages generated by commands like git merge and git revert.

Further paragraphs come after blank lines.

- Bullet points are okay, too

- Typically a hyphen or asterisk is used for the bullet, followed by a
  single space, with blank lines in between, but conventions vary here

If you use an issue tracker, put references to them at the bottom,
like this:

Fixes #5678, fixes #459 (see details at
https://help.github.com/articles/closing-issues-via-commit-messages/).
```

**DO**

- Use the present tense ("Add feature" not "Added feature").
- Use the imperative mode ("Move cursor to..." not "Moves cursor to...").
- Limit the first line to [50 characters or less](http://stopwritingramblingcommitmessages.com/).
- Always leave the second line blank (if there's more than just the subject).
- Line break the commit message (to make the commit message readable without
having to scroll horizontally).
- Reference issues and pull requests liberally.

**DON'T**

- Don't end the summary line with a period - it's a title and titles don't end
with a period.
- Never use the `-m <msg>`/`--message=<msg>` flag to `git commit`; it gives you
a poor mindset as you will feel that you have to fit your commit message into
the terminal command, and makes the commit feel more like a one-off argument
than a page in history.

**Tips**

- If it seems difficult to summarize what your commit does, it may be because
it includes several logical changes or bug fixes, and are better split up into
several commits using `git add -p`.

**References**

- Tim Pope's [A Note About Git Commit Messages](http://tbaggery.com/2008/04/19/a-note-about-git-commit-messages.html)
- Git's [Submitting Patches](http://git.kernel.org/cgit/git/git.git/tree/Documentation/SubmittingPatches?id=HEAD) guidelines
- [Linux kernel suggestion](http://stackoverflow.com/a/11993051/1104534) on SO
- Linus Torvalds' [commit message guidelines](https://github.com/torvalds/linux/pull/17#issuecomment-5659933)
